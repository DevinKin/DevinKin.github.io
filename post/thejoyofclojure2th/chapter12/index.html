<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Clojure趣学指南-第12章-调用Java - Devinkin Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="devinkin" /><meta name="description" content="第12章-调用Java Clojure提供了一组特定的与Java交互的工具 gen-class proxy definterface 异常机制 使用proxy生成对象 Clojure的 proxy 机制仅用于互操" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.70.0 with theme even" />


<link rel="canonical" href="https://devinkin.github.io/post/thejoyofclojure2th/chapter12/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="https://devinkin.github.io/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Clojure趣学指南-第12章-调用Java" />
<meta property="og:description" content="第12章-调用Java Clojure提供了一组特定的与Java交互的工具 gen-class proxy definterface 异常机制 使用proxy生成对象 Clojure的 proxy 机制仅用于互操" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://devinkin.github.io/post/thejoyofclojure2th/chapter12/" />
<meta property="article:published_time" content="2020-05-23T16:48:10+08:00" />
<meta property="article:modified_time" content="2020-05-23T16:48:10+08:00" />
<meta itemprop="name" content="Clojure趣学指南-第12章-调用Java">
<meta itemprop="description" content="第12章-调用Java Clojure提供了一组特定的与Java交互的工具 gen-class proxy definterface 异常机制 使用proxy生成对象 Clojure的 proxy 机制仅用于互操">
<meta itemprop="dateModified" content="2020-05-23T16:48:10&#43;08:00" />
<meta itemprop="wordCount" content="4110">



<meta itemprop="keywords" content="Clojure,Lisp," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Clojure趣学指南-第12章-调用Java"/>
<meta name="twitter:description" content="第12章-调用Java Clojure提供了一组特定的与Java交互的工具 gen-class proxy definterface 异常机制 使用proxy生成对象 Clojure的 proxy 机制仅用于互操"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Devinkin</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Devinkin</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Clojure趣学指南-第12章-调用Java</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-05-23 </span>
        <div class="post-category">
            <a href="/categories/clojure/"> Clojure </a>
            </div>
          <span class="more-meta"> 约 4110 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#第12章-调用java">第12章-调用Java</a>
      <ul>
        <li><a href="#使用proxy生成对象">使用proxy生成对象</a></li>
        <li><a href="#gen-class和图形编程">gen-class和图形编程</a></li>
        <li><a href="#clojure和java数组的关系">Clojure和Java数组的关系</a></li>
        <li><a href="#所有clojure函数实现">所有Clojure函数实现</a></li>
        <li><a href="#在java的api上使用clojure的数据结构">在Java的API上使用Clojure的数据结构</a></li>
        <li><a href="#definterface宏">definterface宏</a></li>
        <li><a href="#异常处理">异常处理</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="第12章-调用java">第12章-调用Java</h2>
<p>Clojure提供了一组特定的与Java交互的工具</p>
<ul>
<li>gen-class</li>
<li>proxy</li>
<li>definterface</li>
<li>异常机制</li>
</ul>
<h3 id="使用proxy生成对象">使用proxy生成对象</h3>
<p>Clojure的 <code>proxy</code> 机制仅用于互操作性目的。 <code>proxy</code> 会带入许多Java的语义到
Clojure程序中。</p>
<h4 id="一个简单的动态web服务">一个简单的动态web服务</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">ns </span><span class="nv">web</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.java.io</span> <span class="ss">:as</span> <span class="nv">io</span><span class="p">]</span>
	    <span class="p">[</span><span class="nv">clojure.string</span> <span class="ss">:as</span> <span class="nv">string</span><span class="p">])</span>
  <span class="p">(</span><span class="ss">:import</span> <span class="p">[</span><span class="nv">com.sun.net.httpserver</span> <span class="nv">HttpHandler</span> <span class="nv">HttpExchange</span> <span class="nv">HttpServer</span><span class="p">]</span>
	   <span class="p">[</span><span class="nv">java.net</span> <span class="nv">InetSocketAddress</span> <span class="nv">URLDecoder</span> <span class="nv">URI</span><span class="p">]</span>
	   <span class="p">[</span><span class="nv">java.io</span> <span class="nv">File</span> <span class="nv">FilterOutputStream</span><span class="p">]))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">OK</span> <span class="nv">java.net.HttpURLConnection/HTTP_OK</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">respond</span>
  <span class="s">&#34;response func&#34;</span>
  <span class="p">([</span><span class="nv">exchange</span> <span class="nv">body</span><span class="p">]</span>
   <span class="p">(</span><span class="nf">respond</span> <span class="nb">identity </span><span class="nv">exchange</span> <span class="nv">body</span><span class="p">))</span>
  <span class="p">([</span><span class="nv">around</span> <span class="nv">exchange</span> <span class="nv">body</span><span class="p">]</span>
   <span class="p">(</span><span class="nf">.sendResponseHeaders</span> <span class="nv">exchange</span> <span class="nv">OK</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">with-open </span><span class="p">[</span><span class="nv">resp</span> <span class="p">(</span><span class="nf">around</span> <span class="p">(</span><span class="nf">.getResponseBody</span> <span class="nv">exchange</span><span class="p">))]</span>
     <span class="p">(</span><span class="nf">.write</span> <span class="nv">resp</span> <span class="p">(</span><span class="nf">.getBytes</span> <span class="nv">body</span><span class="p">)))))</span>


<span class="p">(</span><span class="kd">defn </span><span class="nv">new-server</span>
  <span class="s">&#34;web-server&#34;</span>
  <span class="p">[</span><span class="nv">port</span> <span class="nb">path </span><span class="nv">handler</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">doto</span>
      <span class="p">(</span><span class="nf">HttpServer/create</span> <span class="p">(</span><span class="nf">InetSocketAddress.</span> <span class="nv">port</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">.createContext</span> <span class="nb">path </span><span class="nv">handler</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">.setExecutor</span> <span class="nv">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">.start</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">default-handler</span>
  <span class="s">&#34;handler&#34;</span>
  <span class="p">[</span><span class="nv">txt</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">proxy </span><span class="p">[</span><span class="nv">HttpHandler</span><span class="p">]</span>
      <span class="p">[]</span>
    <span class="p">(</span><span class="nf">handle</span> <span class="p">[</span><span class="nv">exchange</span><span class="p">]</span>
      <span class="p">(</span><span class="nf">respond</span> <span class="nv">exchange</span> <span class="nv">txt</span><span class="p">))))</span>


<span class="p">(</span><span class="k">def </span><span class="nv">server</span>
  <span class="p">(</span><span class="nf">new-server</span>
    <span class="mi">5678</span>
    <span class="s">&#34;/devinkin/hello&#34;</span>
    <span class="p">(</span><span class="nf">default-handler</span> <span class="s">&#34;Hello Devinkin&#34;</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">.stop</span> <span class="nv">server</span> <span class="mi">0</span><span class="p">)</span>


<span class="p">(</span><span class="k">def </span><span class="nv">p</span> <span class="p">(</span><span class="nf">default-handler</span>
	 <span class="s">&#34;There&#39;s no problem that can&#39;t be solved
</span><span class="s">with another level of indirection&#34;</span><span class="p">))</span>


<span class="p">(</span><span class="k">def </span><span class="nv">server</span>
  <span class="p">(</span><span class="nf">new-server</span> <span class="mi">8123</span> <span class="s">&#34;/&#34;</span> <span class="nv">p</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>想要更新 <code>default-handler</code> 处理器的内容，Clojure提供了 <code>update-proxy</code> 对处理器进行热更新。它接受代理实例和一个映射，该映射包含方法名称以实现其新行为的函数。</p>
<ul>
<li>映射中提供的函数接受 <code>this</code> 实例作为它的第一个参数</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nb">update-proxy </span><span class="nv">p</span>
  <span class="p">{</span><span class="s">&#34;handle&#34;</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">this</span> <span class="nv">exchange</span><span class="p">]</span>
	      <span class="p">(</span><span class="nf">respond</span> <span class="nv">exchange</span> <span class="p">(</span><span class="nb">str </span><span class="s">&#34;this is &#34;</span> <span class="nv">this</span><span class="p">)))})</span>
</code></pre></td></tr></table>
</div>
</div><p>Clojure的 <code>proxy</code> 函数根据需求为实际的类生成字节码，但这样做的方式是提供更动态的实现。</p>
<p>Clojure不会将给定方法主体的字节码直接插入代理类，而是会生成适当的代理，其中每个方法都查找实现该方法行为的函数。</p>
<p>基于方法名称，从映射中检索相应的函数，并使用此引用和其余参数进行调用。这会以一些运行时成本为代价来交换高度有用的动态行为，但是在很多情况下这是公平的交换。</p>
<p><code>proxy</code> 会生成匿名实例，这些实例不能用于以后的扩展。想要生成命名的类实例，使用Clojure的 <code>gen-class</code> 机制。</p>
<h3 id="gen-class和图形编程">gen-class和图形编程</h3>
<h4 id="命名空间作为类规范">命名空间作为类规范</h4>
<p>使用 <code>gen-class</code> 生成一个类，如果使用deps tool，需要在 <code>deps.edn</code> 中指定
<code>:path [&quot;src&quot;]</code> 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">ns </span><span class="nv">gui.DynaFrame</span>
  <span class="p">(</span><span class="ss">:gen-class</span>
    <span class="ss">:name</span>           <span class="nv">gui.DynaFrame</span>
    <span class="ss">:extends</span>        <span class="nv">javax.swing.JFrame</span>
    <span class="ss">:implements</span>    <span class="p">[</span><span class="nv">clojure.lang.IMeta</span><span class="p">]</span>
    <span class="ss">:prefix</span>         <span class="s">&#34;df-&#34;</span>
    <span class="ss">:state</span>          <span class="nv">state</span>
    <span class="ss">:init</span>           <span class="nv">init</span>
    <span class="ss">:constuctors</span>   <span class="p">{[</span><span class="nv">String</span><span class="p">]</span> <span class="p">[</span><span class="nv">String</span><span class="p">]}</span>
    <span class="ss">:methods</span>        <span class="p">[[</span><span class="nv">display</span> <span class="p">[</span><span class="nv">java.awt.Container</span><span class="p">]</span> <span class="nv">void</span><span class="p">]</span>
		     <span class="o">^</span><span class="p">{</span><span class="ss">:static</span> <span class="nv">true</span><span class="p">}</span> <span class="p">[</span><span class="nv">version</span> <span class="p">[]</span> <span class="nv">String</span><span class="p">]])</span>
  <span class="p">(</span><span class="ss">:import</span> <span class="p">(</span><span class="nf">javax.swing</span> <span class="nv">JFrame</span> <span class="nv">JPanel</span><span class="p">)</span>
	    <span class="p">(</span><span class="nf">java.awt</span> <span class="nv">BorderLayout</span> <span class="nv">Container</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">df-init</span> <span class="p">[</span><span class="nv">title</span><span class="p">]</span> <span class="p">[[</span><span class="nv">title</span><span class="p">]</span> <span class="p">(</span><span class="nf">atom</span> <span class="p">{</span><span class="ss">::title</span> <span class="nv">title</span><span class="p">})])</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">df-meta</span> <span class="p">[</span><span class="nv">this</span><span class="p">]</span> <span class="o">@</span><span class="p">(</span><span class="nf">.state</span> <span class="nv">this</span><span class="p">))</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">version</span> <span class="p">[]</span> <span class="s">&#34;1.0&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">df-display</span> <span class="p">[</span><span class="nv">this</span> <span class="nv">pane</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">doto </span><span class="nv">this</span>
    <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.getContentPane</span> <span class="nv">.removeAll</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">.setContentPane</span> <span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">JPanel.</span><span class="p">)</span>
			 <span class="p">(</span><span class="nf">.add</span> <span class="nv">pane</span> <span class="nv">BorderLayout/CENTER</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">.pack</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">.setVisible</span> <span class="nv">true</span><span class="p">)))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">gui</span> <span class="p">(</span><span class="nf">gui.DynaFrame.</span> <span class="s">&#34;4th&#34;</span><span class="p">))</span>

<span class="p">(</span><span class="nf">.display</span> <span class="nv">gui</span> <span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">javax.swing.JPanel.</span><span class="p">)</span>
		<span class="p">(</span><span class="nf">.add</span> <span class="p">(</span><span class="nf">javax.swing.JLabel.</span> <span class="s">&#34;Charlemagne and Pippin&#34;</span><span class="p">))))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="clojure和java数组的关系">Clojure和Java数组的关系</h3>
<h4 id="数组的类型-原语和引用">数组的类型：原语和引用</h4>
<p>Clojure数字具有盒装形式，但是在许多情况下，Clojure编译器可以为原始互操作性调用解析正确的调用。但是当提供引用数组时，它永远无法解决传递原始数组的需要。</p>
<p>Clojure的 <code>into-array</code> 函数不返回 <code>char[]</code> 的原始类型数组，返回
<code>Character[]</code> 的引用数组，强制Clojure编译器改为解决对
<code>StringBuilder.append(Object)</code> 方法的调用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">StringBuilder.</span> <span class="s">&#34;abc&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">.append</span> <span class="p">(</span><span class="nb">into-array </span><span class="p">[</span><span class="sc">\x</span> <span class="sc">\y</span> <span class="sc">\z</span><span class="p">])))</span>
</code></pre></td></tr></table>
</div>
</div><p>Clojure提供一系列原始数组构建函数，和 <code>char-array</code> 类似。</p>
<ul>
<li>boolean-array</li>
<li>byte-array</li>
<li>char-array</li>
<li>double-array</li>
<li>float-array</li>
<li>int-array</li>
<li>long-array</li>
<li>Object-array</li>
<li>short-array</li>
</ul>
<p>可以使用 <code>make-array</code> 和 <code>into-array</code> 函数创建原始数组</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">ary</span> <span class="p">(</span><span class="nb">make-array </span><span class="nv">Long/TYPE</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">)]</span>
  <span class="p">(</span><span class="nb">dotimes </span><span class="p">[</span><span class="nv">i</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">(</span><span class="nb">dotimes </span><span class="p">[</span><span class="nv">j</span> <span class="mi">3</span><span class="p">]</span>
      <span class="p">(</span><span class="nb">aset </span><span class="nv">ary</span> <span class="nv">i</span> <span class="nv">j</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="nv">j</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">map seq </span><span class="nv">ary</span><span class="p">))</span>

<span class="p">(</span><span class="nb">into-array </span><span class="nv">Integer/TYPE</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p>要创建特定引用类型或兼容类型的数组，请使用 <code>into-array</code> 函数，并传入类型和一系列对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nb">into-array </span><span class="p">[</span><span class="s">&#34;a&#34;</span> <span class="s">&#34;b&#34;</span> <span class="s">&#34;c&#34;</span><span class="p">])</span>
<span class="p">(</span><span class="nb">into-array </span><span class="p">[(</span><span class="nf">java.util.Date.</span><span class="p">)</span> <span class="p">(</span><span class="nf">java.sql.Time.</span> <span class="mi">0</span><span class="p">)])</span>
<span class="p">(</span><span class="nb">into-array </span><span class="p">[</span><span class="s">&#34;a&#34;</span> <span class="s">&#34;b&#34;</span> <span class="mi">1</span><span class="nv">M</span><span class="p">])</span>  <span class="c1">;; array element type mismatch</span>
<span class="p">(</span><span class="nb">into-array </span><span class="nv">Number</span> <span class="p">[</span><span class="mi">1</span> <span class="mf">2.0</span> <span class="mi">3</span><span class="nv">M</span> <span class="mi">4</span><span class="nv">/5</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p><code>into-array</code> 函数基于传入序列的第一个元素的类型决定返回的类型，并且每个子序列元素的类型必须是第一个元素的子类。</p>
<p>可以使用 <code>to-array</code> 或者 <code>to-array-2d</code> 函数创建 <code>java.lang.Object</code> 的异构数组。注意的是：使用 <code>to-array</code> 和 <code>to-array-2d</code> 时原始类型会被自动包装。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nb">to-array-2d </span><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
	      <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]])</span>
<span class="p">(</span><span class="nb">to-array </span><span class="p">[</span><span class="s">&#34;a&#34;</span> <span class="mi">1</span><span class="nv">M</span> <span class="o">#</span><span class="p">(</span><span class="nf">%</span><span class="p">)</span> <span class="p">(</span><span class="nb">proxy </span><span class="p">[</span><span class="nv">Object</span><span class="p">]</span> <span class="p">[])])</span>
<span class="p">(</span><span class="nb">to-array </span><span class="p">[</span><span class="mi">1</span> <span class="p">(</span><span class="nb">int </span><span class="mi">2</span><span class="p">)])</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="数组可变性">数组可变性</h4>
<p>由于JVM数组是可变的，所以你需要知道Java数组的内容是随时都可以改变的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn </span><span class="nv">asum-seq</span>
  <span class="s">&#34;asum-seq&#34;</span>
  <span class="p">[</span><span class="nv">xs</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">db1</span> <span class="p">(</span><span class="nf">amap</span> <span class="nv">xs</span> <span class="nv">i</span> <span class="nv">ret</span>
	      <span class="p">(</span><span class="nb">* </span><span class="p">(</span><span class="nb">aget </span><span class="nv">xs</span> <span class="nv">i</span><span class="p">)</span>
		<span class="p">(</span><span class="nb">aget </span><span class="nv">xs</span> <span class="nv">i</span><span class="p">)))]</span>
    <span class="p">(</span><span class="nb">println </span><span class="p">(</span><span class="nb">seq </span><span class="nv">db1</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">areduce</span> <span class="nv">db1</span> <span class="nv">i</span> <span class="nv">ret</span> <span class="mi">0</span>
      <span class="p">(</span><span class="nb">+ </span><span class="nv">ret</span> <span class="p">(</span><span class="nb">aget </span><span class="nv">db1</span> <span class="nv">i</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">asum-seq</span> <span class="p">(</span><span class="nf">double-array</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">]))</span>
</code></pre></td></tr></table>
</div>
</div><p>使用Java可变数组时要小心，传递数组时使用 <code>seq</code> 函数包裹传递，因为当您仅对seq
进行引用时，无法获得数组。</p>
<h4 id="数组的命名">数组的命名</h4>
<table>
<thead>
<tr>
<th>表示形式</th>
<th>数组类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>[Ljava.lang.Object</td>
<td>引用数组</td>
</tr>
<tr>
<td>[B</td>
<td>原始byte类型数组</td>
</tr>
<tr>
<td>[I</td>
<td>原始int类型数组</td>
</tr>
<tr>
<td>[C</td>
<td>原始char类型数组</td>
</tr>
<tr>
<td>[S</td>
<td>原始short类型数组</td>
</tr>
<tr>
<td>[F</td>
<td>原始float类型数组</td>
</tr>
<tr>
<td>[D</td>
<td>原始double类型数组</td>
</tr>
<tr>
<td>[J</td>
<td>原始long类型数组</td>
</tr>
<tr>
<td>[Z</td>
<td>原始boolean类型数组</td>
</tr>
<tr>
<td>[</td>
<td>一维数组</td>
</tr>
<tr>
<td>[[</td>
<td>二维数组，以此类推</td>
</tr>
</tbody>
</table>
<p>可以定义多重方法简化输出数组类型名称</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmulti </span><span class="nv">what-is</span> <span class="nv">class</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmethod </span><span class="nv">what-is</span>
  <span class="p">(</span><span class="nf">Class/forName</span> <span class="s">&#34;[Ljava.lang.String;&#34;</span><span class="p">)</span>
  <span class="p">[</span><span class="nv">_</span><span class="p">]</span>
  <span class="s">&#34;1d String&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmethod </span><span class="nv">what-is</span>
  <span class="p">(</span><span class="nf">Class/forName</span> <span class="s">&#34;[[Ljava.lang.Object;&#34;</span><span class="p">)</span>
  <span class="p">[</span><span class="nv">_</span><span class="p">]</span>
  <span class="s">&#34;2d Object&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmethod </span><span class="nv">what-is</span>
  <span class="p">(</span><span class="nf">Class/forName</span> <span class="s">&#34;[[[[I&#34;</span><span class="p">)</span>
  <span class="p">[</span><span class="nv">_</span><span class="p">]</span>
  <span class="s">&#34;Primitive 4d int&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmethod </span><span class="nv">what-is</span>
  <span class="p">(</span><span class="nf">Class/forName</span> <span class="s">&#34;[[D&#34;</span><span class="p">)</span>
  <span class="p">[</span><span class="nv">a</span><span class="p">]</span>
  <span class="s">&#34;Primitive 2d double&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmethod </span><span class="nv">what-is</span>
  <span class="p">(</span><span class="nf">Class/forName</span> <span class="s">&#34;[Lclojure.lang.PersistentVector;&#34;</span><span class="p">)</span>
  <span class="p">[</span><span class="nv">a</span><span class="p">]</span>
  <span class="s">&#34;1d Persistent Vector&#34;</span><span class="p">)</span>

<span class="p">(</span><span class="nf">what-is</span> <span class="p">(</span><span class="nb">into-array </span><span class="p">(</span><span class="nb">map </span><span class="nv">double-array</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]])))</span>

<span class="p">(</span><span class="nf">what-is</span> <span class="p">(</span><span class="nb">into-array </span><span class="p">[[</span><span class="mf">1.0</span><span class="p">]</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]))</span>

<span class="p">(</span><span class="nf">what-is</span> <span class="p">(</span><span class="nb">into-array </span><span class="p">[</span><span class="s">&#34;a&#34;</span> <span class="s">&#34;b&#34;</span><span class="p">]))</span>

<span class="p">(</span><span class="nf">what-is</span> <span class="p">(</span><span class="nb">to-array-2d </span><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]]))</span>

<span class="p">(</span><span class="nf">what-is</span> <span class="p">(</span><span class="nb">make-array </span><span class="nv">Integer/TYPE</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="可变参方法-构造函数调用">可变参方法/构造函数调用</h4>
<p>尽管Java在语言级别提供了语法糖，但在字节码级别没有可变参数的构造函数或方法。相反，可变参数方法期望将数组作为其最终参数，这就是在Clojure互操作方案中应如何访问它们</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">String/format</span> <span class="s">&#34;An int %d and a String %s&#34;</span>
  <span class="p">(</span><span class="nb">to-array </span><span class="p">[</span><span class="mi">99</span>, <span class="s">&#34;luftballons&#34;</span><span class="p">]))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="所有clojure函数实现">所有Clojure函数实现</h3>
<p>Clojure函数非常适合于互操作性。它们的基础类实现了许多有用的接口，您可以通过运行 <code>(ancestors (class #()))</code> 对这些接口进行调查。</p>
<p>大多数结果类仅适用于Clojure的内部，但是一些接口在互操作方案中很有用。</p>
<ul>
<li>java.util.concurrent.Callable</li>
<li>java.util.Comparator</li>
<li>java.lang.Runnable</li>
</ul>
<h4 id="java-dot-util-dot-comparator接口">java.util.Comparator接口</h4>
<p><code>java.util.Comparator</code> 接口定义了 <code>.compare</code> 方法的签名，该方法接受两个参数
<code>l</code> 和 <code>r</code> 。</p>
<ul>
<li>如 <code>l &lt; r</code> ，返回值小于0</li>
<li>如 <code>l == r</code> ，返回值等于0</li>
<li>如 <code>l &gt; r</code> ，返回值大于0</li>
</ul>
<p>Clojure函数实现了 <code>java.util.Comparator</code> 接口，因此当函数的返回值符合接口的定义，可以作为比较器进行使用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn </span><span class="nv">gimme</span>
  <span class="s">&#34;TODO add docstring&#34;</span>
  <span class="p">[]</span>
  <span class="p">(</span><span class="nf">ArrayList.</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">2</span><span class="p">]))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">Collections/sort</span> <span class="p">(</span><span class="nf">Collections/reverseOrder</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">Collections/sort</span>
    <span class="p">(</span><span class="nf">reify</span> <span class="nv">Comparator</span>
      <span class="p">(</span><span class="nf">compare</span> <span class="p">[</span><span class="nv">this</span> <span class="nv">l</span> <span class="nv">r</span><span class="p">]</span>
	<span class="p">(</span><span class="nf">cond</span>
	  <span class="p">(</span><span class="nb">&gt; </span><span class="nv">l</span> <span class="nv">r</span><span class="p">)</span> <span class="mi">-1</span>
	  <span class="p">(</span><span class="nb">= </span><span class="nv">l</span> <span class="nv">r</span><span class="p">)</span> <span class="mi">0</span>
	  <span class="ss">:else</span> <span class="mi">1</span><span class="p">)))))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span> <span class="p">(</span><span class="nf">Collections/sort</span> <span class="o">#</span><span class="p">(</span><span class="nf">compare</span> <span class="nv">%2</span> <span class="nv">%1</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span> <span class="p">(</span><span class="nf">Collections/sort</span> <span class="nv">&gt;</span><span class="p">))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span> <span class="p">(</span><span class="nf">Collections/sort</span> <span class="nv">&lt;</span><span class="p">))</span>

<span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">gimme</span><span class="p">)</span> <span class="p">(</span><span class="nf">Collections/sort</span> <span class="p">(</span><span class="nb">complement </span><span class="nv">&lt;</span><span class="p">)))</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="java-dot-lang-dot-runnable接口">java.lang.Runnable接口</h4>
<p>Java线程需要一个实现 <code>java.lang.Runnable</code> 接口的对象，该对象用于不返回任何值的计算。</p>
<p>如果您希望将一个函数传递给另一个Java线程，就像将其作为Thread构造函数的参数提供一样容易，因为每个Clojure函数都实现了 <code>java.lang.Runnable</code> 接口。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">Thread.</span> <span class="o">#</span><span class="p">(</span><span class="k">do </span><span class="p">(</span><span class="nf">Thread/sleep</span> <span class="mi">5000</span><span class="p">)</span>
		    <span class="p">(</span><span class="nb">println </span><span class="s">&#34;haikeeba!&#34;</span><span class="p">)))</span>
  <span class="nv">.start</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="java-dot-util-dot-concurrent-dot-callable接口">java.util.concurrent.Callable接口</h4>
<p>Java的 <code>java.util.concurrent.Callable</code> 接口专门用于在线程上下文中用于返回值的计算。</p>
<p>可以使用Java的 <code>java.util.concurrentFutureTask</code> 类使用Clojure函数，表示计算稍后发生。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">f</span> <span class="p">(</span><span class="nf">FutureTask.</span> <span class="o">#</span><span class="p">(</span><span class="k">do </span><span class="p">(</span><span class="nf">Thread/sleep</span> <span class="mi">5000</span><span class="p">)</span> <span class="mi">42</span><span class="p">))]</span>
  <span class="p">(</span><span class="nf">.start</span> <span class="p">(</span><span class="nf">Thread.</span> <span class="o">#</span><span class="p">(</span><span class="nf">.run</span> <span class="nv">f</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">.get</span> <span class="nv">f</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="在java的api上使用clojure的数据结构">在Java的API上使用Clojure的数据结构</h3>
<h4 id="java-dot-util-dot-list接口">java.util.List接口</h4>
<p>Clojure顺序集合符合 <code>java.util.List</code> 接口的不可变部分，而后者又扩展了 <code>java.util.Collection</code>
和 <code>java.lang .Iterable</code> 接口。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">.get</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">]</span> <span class="mi">1</span><span class="p">)</span>

<span class="p">(</span><span class="nf">.get</span> <span class="p">(</span><span class="nb">repeat </span><span class="ss">:a</span><span class="p">)</span> <span class="mi">138</span><span class="p">)</span>

<span class="p">(</span><span class="nf">.containsAll</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">]</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">b</span> <span class="nv">c</span><span class="p">])</span>

<span class="p">(</span><span class="nf">.add</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">]</span> <span class="ss">&#39;d</span><span class="p">)</span>
<span class="c1">; java.lang.UnsupportedOperationException：序列不可变</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="java-dot-lang-dot-comparable接口">java.lang.Comparable接口</h4>
<p><code>java.lang.Comparable</code> 接口是 <code>Comparator</code> 的兄弟接口。</p>
<p><code>Comparator</code> 是指可以比较两个其他对象的对象，而 <code>Comparable</code> 是指可以将自身与另一个对象进行比较的对象。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">.compareTo</span> <span class="p">[</span><span class="ss">:a</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span><span class="p">])</span>

<span class="p">(</span><span class="nf">.compareTo</span> <span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span><span class="p">])</span>

<span class="p">(</span><span class="nf">.compareTo</span> <span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span> <span class="ss">:c</span><span class="p">])</span>

<span class="p">(</span><span class="nb">sort </span><span class="p">[[</span><span class="ss">:a</span> <span class="ss">:b</span> <span class="ss">:c</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span><span class="p">]])</span>

<span class="p">(</span><span class="nf">.compareTo</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="c1">; ClassCastException</span>
</code></pre></td></tr></table>
</div>
</div><p>Clojure的vector实现是当前唯一实现 <code>java.lang.Comparable</code> 接口（提供 <code>.compareTo</code> 方法）的集合类型。</p>
<h4 id="java-dot-util-dot-randomaccess接口">java.util.RandomAccess接口</h4>
<p>通常情况下， 使用 <code>java.util.RandomAcces</code> 接口表明数据类型提供对其元素的恒定时间索引访问。这允许算法相应地遵循优化路径。通常通过使用.get方法而不是迭代器来执行此优化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">.get</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">]</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="java-dot-util-dot-collection接口">java.util.Collection接口</h4>
<p><code>java.util.Collection</code> 接口是Java集合框架的核心，实现该接口的类可以在许多Java的核心集合API中使用。</p>
<p>利用这一事实的常用用法是使用Clojure序列作为模型来构建可变序列以供Java Collections API使用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn </span><span class="nv">shuffle</span> <span class="p">[</span><span class="nv">coll</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">seq </span><span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">java.util.ArrayList.</span> <span class="nv">coll</span><span class="p">)</span>
	 <span class="p">(</span><span class="nf">java.util.Collections/shuffle</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">shuffle</span> <span class="p">(</span><span class="nb">range </span><span class="mi">10</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>像大多数Clojure集合一样，它的映射类似于Java映射，因为它们可以在非变化上下文中使用。但是不可变映射具有不需要保护副本的附加优点，并且其行为与不可修改的Java映射完全相同。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">java.util.Collections/unmodifiableMap</span>
  <span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">java.util.HashMap.</span><span class="p">)</span> <span class="p">(</span><span class="nf">.put</span> <span class="ss">:a</span> <span class="mi">1</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">into </span><span class="p">{}</span> <span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">java.util.HashMap.</span><span class="p">)</span> <span class="p">(</span><span class="nf">.put</span> <span class="ss">:a</span> <span class="mi">1</span><span class="p">)))</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="java-dot-util-dot-set接口">java.util.Set接口</h4>
<p>由于严格遵循促进互操作性的原则，您无法总是避免使用Clojure代码处理可变的问题。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="k">def </span><span class="nv">x</span> <span class="p">(</span><span class="nf">java.awt.Point.</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">y</span> <span class="p">(</span><span class="nf">java.awt.Point.</span> <span class="mi">0</span> <span class="mi">42</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">points</span> <span class="o">#</span><span class="p">{</span><span class="nv">x</span> <span class="nv">y</span><span class="p">})</span>

<span class="p">(</span><span class="nf">.setLocation</span> <span class="nv">y</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>

<span class="nv">points</span>
<span class="c1">;= both 0 0</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="definterface宏">definterface宏</h3>
<h4 id="即时生成接口">即时生成接口</h4>
<p>当您对协议进行AOT编译时，您将使用定义的方法以相同的名称生成一个公共接口。</p>
<p>使用 <code>definterface</code> 定义一个 <code>ISliceable</code> 接口。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="k">def </span><span class="nv">dumb</span>
  <span class="p">(</span><span class="nf">reify</span> <span class="nv">ISliceable</span>
    <span class="p">(</span><span class="nf">slice</span> <span class="p">[</span><span class="nv">_</span> <span class="nv">s</span> <span class="nv">e</span><span class="p">]</span> <span class="p">[</span><span class="ss">:empty</span><span class="p">])</span>
    <span class="p">(</span><span class="nf">sliceCount</span> <span class="p">[</span><span class="nv">_</span><span class="p">]</span> <span class="mi">42</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">.slice</span> <span class="nv">dumb</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">.sliceCount</span> <span class="nv">dumb</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defprotocol </span><span class="nv">Sliceable</span>
  <span class="p">(</span><span class="nf">slice</span> <span class="p">[</span><span class="nv">this</span> <span class="nv">s</span> <span class="nv">e</span><span class="p">])</span>
  <span class="p">(</span><span class="nf">sliceCount</span> <span class="p">[</span><span class="nv">this</span><span class="p">]))</span>

<span class="p">(</span><span class="nf">extend</span> <span class="nv">ISliceable</span>
  <span class="nv">Sliceable</span>
  <span class="p">{</span><span class="ss">:slice</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">this</span> <span class="nv">s</span> <span class="nv">e</span><span class="p">]</span> <span class="p">(</span><span class="nf">.slice</span> <span class="nv">this</span> <span class="nv">s</span> <span class="nv">e</span><span class="p">))</span>
   <span class="ss">:sliceCount</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">this</span><span class="p">]</span> <span class="p">(</span><span class="nf">.sliceCount</span> <span class="nv">this</span><span class="p">))})</span>

<span class="p">(</span><span class="nf">sliceCount</span> <span class="nv">dumb</span><span class="p">)</span>

<span class="p">(</span><span class="nf">slice</span> <span class="nv">dumb</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>使用 <code>definterface</code> 优于 <code>defprotocol</code> 的优势完全限于以下事实：
<code>definterface</code> 允许使用原始类型的参数和返回值。谨慎使用 <code>definterface</code> ，首选 <code>defprotocol</code> 。</p>
<h3 id="异常处理">异常处理</h3>
<p>Clojure异常功能的行为直接来自JVM，从而强制实施了已检查异常的发布。异常不仅仅是需要抛出方参与处理，调用抛出方的传播媒介也许要参与处理。</p>
<p>因此，通过包含对Java方法的调用，该方法在闭包内引发了已检查的异常，Clojure有两种可能的选择</p>
<ul>
<li>在每个函数（包括闭包）上提供繁琐的异常声明机制。</li>
<li>默认情况下，声明所有函数均抛出根 <code>Exception</code> 或 <code>RuntimeException</code> 。</li>
</ul>
<h4 id="运行时异常和编译时异常">运行时异常和编译时异常</h4>
<p>Clojure上下文中有两种异常可以抛出：运行时和编译时异常。</p>
<p>有两种类型的运行时异常</p>
<ul>
<li>errors</li>
<li>exceptions</li>
</ul>
<p>由于 <code>StackOverflowError</code> 不是继承 <code>Exception</code> 类，因此使用需要使用 <code>Error</code>
类捕获 <code>StackOverflowError</code> 异常。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn </span><span class="nv">explode</span>
  <span class="s">&#34;&#34;</span>
  <span class="p">[]</span>
  <span class="p">(</span><span class="nf">explode</span><span class="p">))</span>

<span class="p">(</span><span class="nf">try</span> <span class="p">(</span><span class="nf">explode</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">catch</span> <span class="nv">Exception</span> <span class="nv">e</span> <span class="s">&#34;Stack is blown&#34;</span><span class="p">))</span>

<span class="p">(</span><span class="nf">try</span> <span class="p">(</span><span class="nf">explode</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">catch</span> <span class="nv">StackOverflowError</span> <span class="nv">e</span> <span class="s">&#34;Stack is blown&#34;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">try</span> <span class="p">(</span><span class="nf">explode</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">catch</span> <span class="nv">Error</span> <span class="nv">e</span> <span class="s">&#34;Stack is blown&#34;</span><span class="p">))</span>

<span class="p">(</span><span class="nf">try</span> <span class="p">(</span><span class="nf">throw</span> <span class="p">(</span><span class="nf">RuntimeException.</span><span class="p">))</span>
     <span class="p">(</span><span class="nf">catch</span> <span class="nv">Throwable</span> <span class="nv">e</span> <span class="s">&#34;Caching Throwable is Bad&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>在Java中，在Throwable级别捕获异常被视为错误形式，通常在Clojure中同理。</p>
<p>为无法继续的条件保留源自 <code>Errors</code> 的异常，为可能继续的条件保留源自 <code>Exception</code> 的异常。</p>
<p>抛出编译时异常的方法是确保不会以语法引用的形式发生 <code>throw</code> ，如宏的语法问题有错误，应该在编译时就抛出该异常，而不是在运行时抛出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmacro </span><span class="nv">pairs</span> <span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">even?</span> <span class="p">(</span><span class="nb">count </span><span class="nv">args</span><span class="p">))</span>
    <span class="o">`</span><span class="p">(</span><span class="nf">partition</span> <span class="mi">2</span> <span class="o">&#39;~</span><span class="nv">args</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">throw</span> <span class="p">(</span><span class="nf">Exception.</span>
	     <span class="p">(</span><span class="nb">str </span><span class="s">&#34;pairs requires an even number of args&#34;</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">pairs</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>

<span class="p">(</span><span class="nf">pairs</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1">;; 避免这种形式的调用，在编译期间就可以抛出该异常</span>
<span class="p">(</span><span class="k">fn </span><span class="p">[]</span> <span class="p">(</span><span class="nf">pairs</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>尽管它功能强大，但是您应该始终尝试在编译时错误检查与宏的好处以及作为函数实现的好处（在高阶函数中的应用，应用等）之间取得平衡。</p>
<h4 id="处理异常">处理异常</h4>
<p>有两种方式处理异常和错误，每种方法都由错误处理机制流过源的方式定义。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmacro </span><span class="nv">-?&gt;</span> <span class="p">[</span><span class="o">&amp;</span> <span class="nv">forms</span><span class="p">]</span>
  <span class="o">`</span><span class="p">(</span><span class="nf">try</span> <span class="p">(</span><span class="nb">-&gt; </span><span class="o">~@</span><span class="nv">forms</span><span class="p">)</span>
	<span class="p">(</span><span class="nf">catch</span> <span class="nv">NullPointerException</span> <span class="nv">_#</span> <span class="nv">nil</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">-?&gt;</span> <span class="mi">25</span> <span class="nv">Math/sqrt</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">100</span><span class="p">))</span>

<span class="p">(</span><span class="nf">-?&gt;</span> <span class="mi">25</span> <span class="nv">Math/sqrt</span> <span class="p">(</span><span class="nb">and </span><span class="nv">nil</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">100</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>因此，典型的 <code>（try ...（catch ...））</code> 形式将用于处理程序捕获从内部函数和形式冒泡的错误的情况。</p>
<h4 id="自定义异常">自定义异常</h4>
<p>Clojure通常抛出 <code>RuntimeException</code> 或 <code>Error</code> 的派生类，因此您的代码也应在适当的时候为此努力。</p>
<p>Clojure1.4后，提供类两个核心函数，用于将信息附加到承载运行时异常。</p>
<ul>
<li>ex-data</li>
<li>ex-info</li>
</ul>
<p>Clojure提供类新的异常类型 <code>ExceptionInfo</code> 用于保存异常信息和映射。</p>
<p><code>ex-info</code> 函数可以方便的构造一个 <code>ExceptionInfo</code> 实例进行抛出。 <code>ex-data</code> 可以获取异常抛出点上下文传入的更多的信息。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">try</span>
  <span class="p">(</span><span class="nf">perform-unclean-act</span> <span class="mi">42</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">catch</span> <span class="nv">RuntimeException</span> <span class="nv">ex</span>
    <span class="p">(</span><span class="nb">println </span><span class="p">(</span><span class="nb">str </span><span class="s">&#34;Something went wrong.&#34;</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">perform-unclean-act</span> <span class="p">[</span><span class="nv">x</span> <span class="nv">y</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">try</span>
    <span class="p">(</span><span class="nb">/ </span><span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">catch</span> <span class="nv">ArithmeticException</span> <span class="nv">ex</span>
      <span class="p">(</span><span class="nf">throw</span> <span class="p">(</span><span class="nf">ex-info</span> <span class="s">&#34;You attempted and unclean act&#34;</span> <span class="p">{</span><span class="ss">:args</span> <span class="p">[</span><span class="nv">x</span> <span class="nv">y</span><span class="p">]})))))</span>

<span class="p">(</span><span class="nf">try</span>
  <span class="p">(</span><span class="nf">perform-unclean-act</span> <span class="mi">108</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">catch</span> <span class="nv">RuntimeException</span> <span class="nv">ex</span>
    <span class="p">(</span><span class="nb">println </span><span class="p">(</span><span class="nb">str </span><span class="s">&#34;Received error: &#34;</span> <span class="p">(</span><span class="nf">.getMessage</span> <span class="nv">ex</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">when-let </span><span class="p">[</span><span class="nv">ctx</span> <span class="p">(</span><span class="nf">ex-data</span> <span class="nv">ex</span><span class="p">)]</span>
      <span class="p">(</span><span class="nb">println </span><span class="p">(</span><span class="nb">str </span><span class="s">&#34;More information: &#34;</span> <span class="nv">ctx</span><span class="p">)))))</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">devinkin</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-05-23
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/clojure/">Clojure</a>
          <a href="/tags/lisp/">Lisp</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/finacialmanagement/junioraccountvideo/chapter1/">
            <span class="next-text nav-default">初级会计视频-第一章-会计概述</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/DevinKin" class="iconfont icon-github" title="github"></a>
  <a href="https://devinkin.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">devinkin</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="https://devinkin.github.io/js/main.4d21c1cefdf1cd0b77ef59bab2d1bbe3112fc9d6cc04710bb1f0b1fd7b891f11.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
